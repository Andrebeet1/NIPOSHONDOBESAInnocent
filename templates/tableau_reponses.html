{% extends "base.html" %}

{% block title %}Tableau des Réponses{% endblock %}

{% block content %}
<h2 class="mb-4">Tableau des Réponses Complètes</h2>

{% if reponses %}
<div class="table-responsive">
    <table id="tableauReponses" class="table table-striped table-bordered table-hover">
        <thead class="thead-dark">
            <tr>
                <th>ID</th>
                <th>Adresse</th>
                <th>Sexe</th>
                <th>Statut Matrimonial</th>
                <th>Religion</th>
                <th>Niveau d'Éducation</th>
                <th>Taille du Ménage</th>
                <th>Genre de l'enfant</th>
                <th>Profession de la mère</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for r in reponses %}
            <tr>
                <td>{{ r.id }}</td>
                <td>{{ r.address }}</td>
                <td>{{ r.gender }}</td>
                <td>{{ r.marital_status }}</td>
                <td>{{ r.religion }}</td>
                <td>{{ r.education_level }}</td>
                <td>{{ r.household_size }}</td>
                <td>{{ r.child_gender }}</td>
                <td>{{ r.mother_profession }}</td>
                <td>
                    <form action="{{ url_for('delete_reponse', reponse_id=r.id) }}" method="POST" style="display:inline;">
                        <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Voulez-vous vraiment supprimer cette réponse ?');">
                            <i class="fas fa-trash"></i> Supprimer
                        </button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="alert alert-info">Aucune réponse enregistrée pour le moment.</div>
{% endif %}

<!-- DataTables Scripts -->
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap4.min.css">
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap4.min.js"></script>

<script>
$(document).ready(function () {
    $('#tableauReponses').DataTable({
        "language": {
            "url": "//cdn.datatables.net/plug-ins/1.13.6/i18n/fr-FR.json"
        },
        "pageLength": 10,
        "lengthMenu": [ [10, 25, 50, -1], [10, 25, 50, "Tout"] ]
    });
});
</script>
{% endblock %}
