{% extends "base.html" %}

{% block title %}Tableau des réponses{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2>Tableau des Réponses</h2>

    <div class="mb-3">
        <a href="{{ url_for('export_excel') }}" class="btn btn-success">Exporter en Excel</a>
    </div>

    {% if reponses %}
        <table class="table table-bordered table-striped">
            <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Adresse</th>
                    <th>Sexe</th>
                    <th>Statut matrimonial</th>
                    <th>Religion</th>
                    <th>Niveau d'éducation</th>
                    <th>Taille ménage</th>
                    <th>Sexe enfant</th>
                    <th>Profession mère</th>
                    <th>Avoir entendu parler</th>
                    <th>Canal info</th>
                    <th>Signification maladie hydrique</th>
                    <th>Eau insalubre cause maladie</th>
                    <th>Maladies connues</th>
                    <th>Connaissance traitement eau</th>
                    <th>Méthodes traitement eau</th>
                    <th>Moment lavage mains</th>
                    <th>Sensibilisation prévention</th>
                    <th>Canal sensibilisation</th>
                    <th>Source aménagée</th>
                    <th>Source non aménagée</th>
                    <th>Lac</th>
                    <th>Rivière</th>
                    <th>Regideso</th>
                    <th>Borne fontaine</th>
                    <th>Eau pluie</th>
                    <th>Autres source</th>
                    <th>Préciser autres</th>
                    <th>Eau traitée au puisage</th>
                    <th>Méthode traitement puisage</th>
                    <th>Traite eau avant consommation</th>
                    <th>Méthodes traitement consommation</th>
                    <th>Stockage eau</th>
                    <th>Travaux communautaires</th>
                    <th>Fréquence travaux</th>
                    <th>Raison non participation</th>
                    <th>Maladie enfant dernier mois</th>
                    <th>Remarques</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for r in reponses %}
                <tr>
                    <td>{{ r.id }}</td>
                    <td>{{ r.address }}</td>
                    <td>{{ r.gender }}</td>
                    <td>{{ r.marital_status }}</td>
                    <td>{{ r.religion }}</td>
                    <td>{{ r.education_level }}</td>
                    <td>{{ r.household_size }}</td>
                    <td>{{ r.child_gender }}</td>
                    <td>{{ r.mother_profession }}</td>
                    <td>{{ r.heard_about_waterborne_diseases }}</td>
                    <td>{{ r.info_channel }}</td>
                    <td>{{ r.waterborne_disease_meaning }}</td>
                    <td>{{ r.unsafe_water_leads_to_diseases }}</td>
                    <td>{{ r.known_waterborne_diseases }}</td>
                    <td>{{ r.know_water_treatment }}</td>
                    <td>{{ r.water_treatment_methods }}</td>
                    <td>{{ r.moments_lavage }}</td>
                    <td>{{ r.awareness_on_prevention }}</td>
                    <td>{{ r.awareness_channel }}</td>
                    <td>{{ r.source_amenee }}</td>
                    <td>{{ r.source_non_amenee }}</td>
                    <td>{{ r.lac }}</td>
                    <td>{{ r.riviere }}</td>
                    <td>{{ r.regideso }}</td>
                    <td>{{ r.borne_fontaine }}</td>
                    <td>{{ r.eau_pluie }}</td>
                    <td>{{ r.autres }}</td>
                    <td>{{ r.autres_preciser }}</td>
                    <td>{{ r.water_treatment_at_source }}</td>
                    <td>{{ r.water_treatment_method }}</td>
                    <td>{{ r.treat_water_before_consumption }}</td>
                    <td>{{ r.treatment_methods }}</td>
                    <td>{{ r.water_storage }}</td>
                    <td>{{ r.community_work }}</td>
                    <td>{{ r.community_work_frequency }}</td>
                    <td>{{ r.reason_for_not_participating }}</td>
                    <td>{{ r.local_water_committee }}</td>
                    <td>{{ r.remarks }}</td>
                    <td>
                        <form method="POST" action="{{ url_for('delete_reponse', reponse_id=r.id) }}" onsubmit="return confirm('Voulez-vous vraiment supprimer cette réponse ?');">
                            <button type="submit" class="btn btn-danger btn-sm">Supprimer</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>Aucune réponse enregistrée pour le moment.</p>
    {% endif %}
</div>
{% endblock %}
